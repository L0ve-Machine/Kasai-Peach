{% extends "base.html" %}
{% block title %}æˆ¿è©³ç´°: {{ cluster.number }}{% endblock %}

{% block content %}
<h1 class="h4 mb-3">æˆ¿: {{ cluster.number }}</h1>
<p><strong>æ¨¹æœ¨:</strong> <a href="{% url 'tree_detail' cluster.tree.qr_id %}">{{ cluster.tree.qr_id }}</a></p>
<p><strong>ç™»éŒ²æ—¥æ™‚:</strong> {{ cluster.created_at|date:"Y-m-d H:i" }}</p>

<img
  src="{% url 'cluster_qr_png' cluster.id %}"
  class="img-fluid"
  alt="Cluster QR">

<hr>

<h2 class="h5 mt-4">ğŸ“¸ æˆé•·è¨˜éŒ²å†™çœŸ</h2>

{# å†™çœŸãƒ¬ã‚³ãƒ¼ãƒ‰ãŒï¼‘ä»¶ä»¥ä¸Šã‚ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ #}
{% if cluster.photos.exists %}
  {% for photo in cluster.photos.all %}
    {# ImageField ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒç´ã¥ã„ã¦ã„ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ #}
    {% if photo.image %}
      <div class="mb-3">
        <img src="{{ photo.image.url }}" style="max-width: 300px;" class="img-thumbnail mb-1" />
        <p class="mb-0"><strong>æ’®å½±æ—¥æ™‚:</strong> {{ photo.taken_at|date:"Y-m-d H:i" }}</p>
        <p><strong>ãƒ¡ãƒ¢:</strong> {{ photo.note }}</p>
      </div>
    {% else %}
      <div class="mb-3">
        <p><em>â€» ã“ã®å†™çœŸã¯ã¾ã ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</em></p>
        <p class="mb-0"><strong>æ’®å½±æ—¥æ™‚:</strong> {{ photo.taken_at|date:"Y-m-d H:i" }}</p>
        <p><strong>ãƒ¡ãƒ¢:</strong> {{ photo.note }}</p>
      </div>
    {% endif %}
  {% endfor %}
{% else %}
  <p>ã“ã®æˆ¿ã«ã¯ã¾ã æˆé•·è¨˜éŒ²å†™çœŸãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
{% endif %}

<a href="{% url 'clusterphoto_add' cluster.id %}" class="btn btn-primary mt-3">ğŸ“· å†™çœŸã‚’è¿½åŠ </a>
{% endblock %}