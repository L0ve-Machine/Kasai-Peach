{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "ダッシュボード" %}{% endblock %}

{% block content %}
<h1 class="h4 mb-4">{% trans "ダッシュボード" %}</h1>

<div class="row g-4 mb-4">
  <!-- 今日の作業件数 -->
  <div class="col-md-4">
    <div class="card text-white bg-primary h-100 shadow">
      <div class="card-body">
        <h5 class="card-title">{% trans "今日の作業件数" %}</h5>
        <p class="display-6">{{ today_count }}</p>
      </div>
    </div>
  </div>

  <!-- 今月の作業時間 -->
  <div class="col-md-4">
    <div class="card text-white bg-success h-100 shadow">
      <div class="card-body">
        <h5 class="card-title">{% trans "今月の作業時間（分）" %}</h5>
        <p class="display-6">{{ total_minutes }}</p>
      </div>
    </div>
  </div>

  <!-- 作業者別ランキング -->
  <div class="col-md-4">
    <div class="card text-white bg-secondary h-100 shadow">
      <div class="card-body">
        <h5 class="card-title">{% trans "今月の作業ランキング" %}</h5>
        <ul class="list-unstyled mb-0">
          {% for user in user_ranking %}
            <li>{{ user.user__username }}：{{ user.total }}件</li>
          {% empty %}
            <li>{% trans "記録なし" %}</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- 作業スケジュール管理へのリンク -->
{% if varieties %}
  <div class="row">
    <div class="col-md-6 col-lg-4">
      <div class="card h-100 shadow">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{% trans "作業スケジュール" %}</h5>
          <p class="card-text">{% trans "品種ごとの作業期間を設定" %}</p>
          <a href="{% url 'schedule_list' varieties.0.id %}" class="btn btn-outline-primary mt-auto">
            {% trans "桃のスケジュール一覧へ" %}
          </a>
        </div>
      </div>
    </div>
  </div>
{% endif %}
{% endblock %}

